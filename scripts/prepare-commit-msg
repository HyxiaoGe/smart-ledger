MSG_FILE="$1"
COMMIT_SOURCE="$2"

# 对于 merge/revert 等自动生成的消息，不强制追加
if [[ "$COMMIT_SOURCE" == "merge" || "$COMMIT_SOURCE" == "squash" || "$COMMIT_SOURCE" == "commit" ]]; then
  exit 0
fi

FOOTER="本地提交代码由 Codex 生成"

if ! grep -Fq "$FOOTER" "$MSG_FILE"; then
  printf "\n\n%s\n" "$FOOTER" >> "$MSG_FILE"
fi

